{% extends "restaurante/restaurante-base.html" %}
{% block title %}MenuWeb - Restaurante{% endblock %}
{% load staticfiles %}
{% block content %}
<div class="restaurante-home" ng-controller="homeRestauranteCtrl">
    <div class="container">
        <div class="row">
            <div class="col-md-12 well topo">
                <div class="col-md-2">
                    <img class="img-thumbnail img-responsive" ng-src="http://menuweb.com.br/game7api/static/media/empresa/{[em.empresalogado[0].logotipo]}">
                </div>
                <div class="col-md-4">
                    <b>{[em.empresalogado[0].nome]}</b> <br>
                    <small>{[em.empresalogado[0].descricao]}</small>
                </div>
                <div class="col-md-6">
                    <div class="col-md-4">
                        <label>Tempo de entrega</label>
                        <div id="temposelecionado">
                            {[em.empresalogado[0].tipo_tempo]}
                            <a class="btn btn-default btn-xs" style="float:right;" ng-click="abriredicaotempo()">Editar</a>
                        </div>
                        <div id="temposelecionar" style="display:none;">
                            <select class="form-control" id="selTempoEntrega" ng-change="set_tempoentrega();" ng-model="seltempo">
                                <option value="{[tipot.pk]}" ng-repeat="tipot in tt.lista_tipostempo">{[tipot.fields.nome]}</option>
                            </select>
                        </div>
                        <br>

                        <label>Disponibilidade</label>
                        <a href="/restaurante/expediente" class="btn btn-primary">VER EXPEDIENTE</a>
                    </div>

                    <div class="col-md-8 well avaliacoes">
                        <div class="col-md-6">
                            <b>Avaliações</b>
                        </div>
                        <div class="col-md-6">
                            <a href="/restaurante/avaliacoes" class="btn btn-xs btn-primary">ver avaliações</a>
                        </div>
                        <br>
                        <hr style="margin: 5px 0px 10px;">
                        <div class="col-md-12" style="margin:0px;padding:0px;">
                            <div class="semavaliacoes" style="text-align:center;display:none;">
                                Avaliações não disponíveis no momento<br/>
                                <i class="glyphicon glyphicon-save-file" style="font-size:40px;"></i>
                            </div>
                            <div class="lista"  ng-if="em.empresalogado[0].avaliacoes">
                                <table class="table table-striped">
                                    <tr>
                                        <th class="col-md-2">Nota</th>
                                        <th class="col-md-6">Mensagem</th>
                                        <th class="col-md-4">Data</th>
                                    </tr>
                                    <tr ng-repeat="aval in em.empresalogado[0].avaliacoes">
                                        <td style="text-align:center;">{[aval.avaliacao_nota]}</td>
                                        <td>{[aval.avaliacao_mensagem]}</td>
                                        <td>{[aval.avaliacao_data]}</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12 well novospedidos">
                <b>Novos Pedidos</b>

                <a href="/restaurante/pedidos" class="btn btn-primary" style="float:right;">VER PEDIDOS</a>
                <div class="col-md-12">
                    <div class="col-md-4" style="font-size:10px;padding:0px;" ng-repeat="ped in pe.lista_pedidos">
                        <ul class="list-group">
                            <li class="list-group-item" style="padding:5px;">
                                <div class="btn-group" role="group" aria-label="..." style="width:100%;">
                                    <a  class="btn-sm btn-danger btn btn-default" ng-click="atualizar_status(ped.id, 'Pedido Recusado');" style="width:50%;">Recusar</a>
                                    <a class="btn-sm btn btn-default btn-success" ng-click="atualizar_status(ped.id, 'Aguardando Preparo');" style="width:50%;">Aceitar</a>
                                </div>
                            </li>
                            <li class="list-group-item">
                                <b>DATA</b><br>
                                {[ped.data]}
                            </li>
                            <li class="list-group-item">
                                <b>RESTAURANTE</b><br>
                                {[ped.empresa]}
                            </li>
                            <li class="list-group-item">
                                <b>ENTREGA</b><br>
                                {[ped.endereco]}, {[ped.bairro]} -
                                {[ped.cidade]}
                            </li>
                            <li class="list-group-item">
                                <b>ITENS</b>
                                <table class="table" style="font-size:11px;margin-bottom:0px;">
                                    <thead>
                                        <tr>
                                            <th>Produto</th>
                                            <th>Quantidade</th>
                                            <th>obs</th>
                                            <th>Preço</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="it in ped.itens">
                                            <td>{[it.produto]}</td>
                                            <td>{[it.quantidade]}</td>
                                            <td>{[it.observacao]}</td>
                                            <td>R$ {[it.preco_parcial.toFixed(2)]}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </li>
                            <li class="list-group-item">
                                <b>PAGAMENTO</b><br>
                                {[ped.pagamento_obs]} - {[ped.pagamento_tipo]}
                            </li>
                            <li class="list-group-item">
                                <b>STATUS</b><br>
                                {[ped.status]}
                            </li>
                            <li class="list-group-item">
                                <b class="label label-primary" style="font-size: 16PX;padding: 14PX 0PX;text-align: center;display: block;">
                                R$ {[ped.total.toFixed(2)]}
                                </b>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-8" style="padding:0px;">
                <div class="col-md-12 well acumulado">
                    <div class="col-md-10">
                        <b>Acumulado do mês</b>
                    </div>
                    <div class="col-md-2">
                    </div>
                    <hr>

                    <div class="col-md-6">
                        <div class="col-md-6">
                            <b>Pedidos<br>
                                {[em.lista_empresasremessas[0].qtd_naentrega + em.lista_empresasremessas[0].qtd_mercadopago]}
                            </b>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="col-md-6">
                            <b>Faturamento<br>
                               R$ {[em.lista_empresasremessas[0].total_naentrega + em.lista_empresasremessas[0].total_mercadopago]}
                            </b>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="faturamento col-md-12 well">
                    <div class="col-md-8">
                        <b>Faturamento do Mês</b>
                    </div>
                    <div class="col-md-4">
                        <a href="/restaurante/repasse" class="btn btn-xs btn-primary">ver faturas</a>
                    </div>
                    <hr>
                    <table class="table">
                        <tr>
                            <th class="col-md-3">Dt Atual</th>
                            <th class="col-md-3">Dt Fim</th>
                            <th class="col-md-3">Valor</th>
                            <th class="col-md-3">Pago</th>
                        </tr>
                        <tr>
                            <td>{[em.lista_empresasremessas[0].repasses[0].data_inicio]}</td>
                            <td>{[em.lista_empresasremessas[0].repasses[0].data_fim]}</td>
                            <td>R$ {[em.lista_empresasremessas[0].repasses[0].total]}</td>
                            <td class="col-md-2" ng-if="em.lista_empresasremessas[0].repasses[0].pago == true">Sim</td>
                            <td class="col-md-2" ng-if="em.lista_empresasremessas[0].repasses[0].pago == false">Não</td>
                        </tr>
                    </table>

                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}